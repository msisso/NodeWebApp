<div class="content-wrapper" >
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1 style="font-family: 'Source Sans Pro',sans-serif;text-transform: initial; font-weight: 500;">
           Manage
        </h1>
        <ol class="breadcrumb">
            <li><a ui-sref="main"> <i class="glyphicon glyphicon-home"></i>Home</a></li>
            <li><a ui-sref="dashboard"><i class="fa fa-dashboard"></i>Dashboard</a></li>
            <li class="active"><i class="glyphicon glyphicon-cog"></i> Manage</li>
        </ol>
    </section>

    <!-- Main content -->
    <section class="content">
        <div class="box box-warning" id="SearchBox">
            <div class="box-header with-border" ng-click="Search = !Search" style="cursor: pointer;">
                <h3 class="box-title" style="font-family: 'Source Sans Pro',sans-serif;text-transform: initial; font-weight: 200;">Search</h3>
                <div class="box-tools pull-right">
                    <button  class="btn btn-box-tool" ><i ng-class="{'fa fa-minus': Search, 'fa fa-plus': !Search}"></i></button>
                </div>
            </div><!-- /.box-header -->
            <div ng-show="Search" class="box-body slide-toggle" >
                <div class="row">
                    <div class="col-md-12">
                        <form name="searchForm" ng-submit="search()">

                            <div class="form-group">
                                <label>Category</label>
                                <input type="text" name="category" class="form-control" placeholder="Enter category" ng-model="searchCreteria.msgName">
                            </div><!-- /.form-group -->
                            <p>Selected: {{searchCreteria.msgName}}</p>
                            <div class="form-group">
                                <label>Screens</label>
                                <ui-select multiple ng-model="searchCreteria.screensId" theme="bootstrap" ng-disabled="disabled"
                                           close-on-select="false">
                                    <ui-select-match placeholder="Select Screen...">{{$item}}</ui-select-match>
                                    <ui-select-choices repeat="screen in ['1','2','3'] | filter:$select.search">
                                        Screen {{screen}}
                                    </ui-select-choices>
                                </ui-select>
                                <p>Selected: {{searchCreteria.screensId}}</p>
                            </div><!-- /.form-group -->

                            <div class="form-group">
                                <label>Template</label>
                                <ui-select multiple ng-model="searchCreteria.templateName" theme="bootstrap" ng-disabled="disabled "
                                           close-on-select="false">
                                    <ui-select-match placeholder="Select Template...">{{$item}}</ui-select-match>
                                    <ui-select-choices repeat="template in ['A','B','C'] | filter:$select.search">
                                        Template {{template}}
                                    </ui-select-choices>
                                </ui-select>
                                <p>Selected: {{searchCreteria.templateName}}</p>
                            </div>

                            <div style="height:30px"></div>
                            <button type="submit" class="btn btn-primary" ng-disabled="searchForm.$pristine">
                                <i class="fa fa-spinner fa-pulse" ng-show="changeSearchButton"></i> Search
                            </button>
                        </form>

                    </div>
                </div>
                <!-- Search Results -->
                <div class="row">
                    <div class="col-md-12">
                        <div class="content-box-large" ng-show="findresult === 'foundresults' && Search">
                            <div class="panel-body">
                                <div id="search-results" scroll-if="findresult === 'foundresults'">
                                    <table class="table table-hover table-condensed">
                                        <thead>
                                        <tr>
                                            <th>Category</th>
                                            <th>Screens</th>
                                            <th>Template</th>
                                            <th>Duration</th>
                                            <th>Start Date</th>
                                            <th>End Date</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="result in searchResults">
                                            <td>{{result.msgName}}</td>
                                            <td>{{result.screensId}}</td>
                                            <td>{{result.linkTemplate}}</td>
                                            <td>{{result.duration}}</td>
                                            <td>{{result.startDateTime}}</td>
                                            <td>{{result.endDateTime}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="content-box-large" ng-show="findresult === 'notfoundresults'">
                            <div id="search-no-results">
                                <div id="">No results found!</div>
                            </div>
                        </div>
                    </div>
                </div>
             </div>
        </div>



        <div class="box box-warning" id="EditBox" >
            <div class="box-header with-border" ng-click="Edit = !Edit" style="cursor: pointer;" >
                <h3 class="box-title" style="font-family: 'Source Sans Pro',sans-serif;text-transform: initial; font-weight: 200;">Manage</h3>
                <div class="box-tools pull-right">
                    <button  class="btn btn-box-tool" ><i ng-class="{'fa fa-minus': Edit, 'fa fa-plus': !Edit}"></i></button>
                </div>
            </div><!-- /.box-header -->

            <div ng-show="Edit" class="box-body slide-toggle"  ng-init="AllAdvertsInit()">
                <div class="row">
                    <div class="col-md-12">
                        <form ng-hide="!existingAd.edit" name="updateForm" role="form" ng-submit="update(updateForm.$valid)" ng-show="existingAd.edit && existingAd._id === ad._id">

                            <div class="alert alert-danger"
                                 ng-show="(updateForm.$invalid && !updateForm.$pristine && updateForm.submitted)">
                                <button class="close" data-close="alert"></button>
                                <span>
                                    Please make sure that all the required fields are appropriately filled before form submission.
                                </span>
                            </div>

                            <div class="form-group"
                                 ng-class="{ 'has-error' : updateForm.category.$invalid && !updateForm.category.$pristine && updateForm.submitted }">
                                <label>Category</label>
                                <input type="text" name="category" class="form-control" placeholder="Enter category" required=""
                                       ng-model="existingAd.msgName">
                            </div>

                            <div class="form-group">
                                <label>Message Data</label>
                                 <input type="text" ng-repeat="msg in existingAd.msgData" class="form-control" placeholder="Enter Message Data" required="" ng-model='msg'>
                            </div>


                            <div class="form-group">
                                <label>Duration</label>
                                <input type="text" class="form-control" placeholder="Enter duration in seconds" required="" ng-model="existingAd.duration">
                            </div>

                            <div class="form-group"
                                 ng-class="{ 'has-error' : updateForm.startDateTime.$invalid && !updateForm.startDateTime.$pristine && updateForm.submitted }">
                                <div class="row">

                                    <div class="col-md-6">
                                        <label>Start Time</label>
                                        <div class="dropdown">
                                            <a class="dropdown-toggle" id="start-dropdown-update" role="button" data-toggle="dropdown" data-target="#"
                                               href="#">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" data-ng-model="existingAd.startDateTime" name="startDateTime"
                                                           placeholder="Enter start date and time" required="">
                                                    <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                                </div>
                                            </a>
                                            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                                <datetimepicker data-ng-model="existingAd.startDateTime"
                                                                data-datetimepicker-config="{ dropdownSelector: '#start-dropdown-update' }"/>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <label>End Time</label>

                                        <div class="dropdown">
                                            <a class="dropdown-toggle" id="end-dropdown-update" role="button" data-toggle="dropdown" data-target="#"
                                               href="#">
                                                <div class="input-group">
                                                    <input type="text" class="form-control" data-ng-model="existingAd.endDateTime" name="endDateTime"
                                                           placeholder="Enter end date and time" required=""><span
                                                        class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                                </div>
                                            </a>
                                            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                                <datetimepicker data-ng-model="existingAd.endDateTime"
                                                                data-datetimepicker-config="{ dropdownSelector: '#end-dropdown-update' }"/>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Week Days</label>
                                <ui-select multiple ng-model="existingAd.weekDays" theme="bootstrap" ng-disabled="disabled"
                                           close-on-select="false">
                                    <ui-select-match>{{$item}}</ui-select-match>
                                    <ui-select-choices
                                            repeat="day in ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'] | filter:$select.search">
                                        {{day}}
                                    </ui-select-choices>
                                </ui-select>
                            </div>

                            <div class="form-group">
                                <label>Screens</label>
                                <ui-select multiple ng-model="existingAd.screensId" theme="bootstrap" ng-disabled="disabled"
                                           close-on-select="false">
                                    <ui-select-match>{{$item}}</ui-select-match>
                                    <ui-select-choices repeat="screen in [1,2,3] | filter:$select.search">
                                        Screen {{screen}}
                                    </ui-select-choices>
                                </ui-select>
                            </div>

                            <div class="form-group">
                                <label>Template</label>
                                <ui-select multiple ng-model="existingAd.templateName" theme="bootstrap" ng-disabled="disabled"
                                           close-on-select="false">
                                    <ui-select-match>{{$item}}</ui-select-match>
                                    <ui-select-choices repeat="template in ['A','B','C'] | filter:$select.search">
                                        Template {{template}}
                                    </ui-select-choices>
                                </ui-select>
                            </div>

                            <button type="submit" class="btn btn-primary" ng-disabled="updateForm.$pristine">
                                <i class="fa fa-spinner fa-pulse" ng-show="changeSubmitButton"></i> Save
                            </button>
                            <button class="btn btn-primary" ng-click="existingAd.edit = !existingAd.edit">Cancel</button>
                        </form>


                        <table class="table table-hover table-condensed" ng-hide="existingAd.edit">
                            <thead>
                            <tr>
                                <th>Category</th>
                                <th>Screens</th>
                                <th>Template</th>
                                <th>Duration</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                            </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="ad in adsToIterate">
                                    <td>{{ad.msgName}}</td>
                                    <td>{{ad.screensId}}</td>
                                    <td>{{ad.templateName}}</td>
                                    <td>{{ad.duration}}</td>
                                    <td>{{ad.startDateTime}}</td>
                                    <td>{{ad.endDateTime}}</td>
                                    <td><button type="button" class="edit close" ng-click="editAd(ad)" uib-tooltip="Edit"><i
                                            ng-class="{'glyphicon glyphicon-edit': !((!existingAd || existingAd._id !== ad._id) && showLoaderForId === ad._id)
                                        , 'fa fa-spinner fa-spin': (!existingAd || existingAd._id !== ad._id) && showLoaderForId === ad._id && !existingAd.edit}"></i></button></td>
                                    <td><button type="button" class="delete close" ng-click="deleteAd(ad)" uib-tooltip="Delete"><i
                                            ng-class="{'glyphicon glyphicon-trash': !((!existingAd || existingAd._id !== ad._id) && showLoaderForId === ad._id)
                                        , 'fa fa-spinner fa-spin': (!existingAd || existingAd._id !== ad._id) && showLoaderForId === ad._id && !existingAd.delete}"></i></button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>
        <!-- SELECT2 EXAMPLE -->
        <div class="box box-warning" >
            <div class="box-header with-border" ng-click="Create = !Create" style="cursor: pointer;">
                <h3 class="box-title" style="font-family: 'Source Sans Pro',sans-serif;text-transform: initial; font-weight: 200;">Create</h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" ><i ng-class="{'fa fa-minus': Create, 'fa fa-plus': !Create}"></i></button>
                </div>
            </div><!-- /.box-header -->
            <form role="form">
                <div ng-show="Create" class="box-body slide-toggle" id="CreateBox">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label>Minimal</label>
                                <select class="form-control select2" style="width: 100%;">
                                    <option selected="selected">Alabama</option>
                                    <option>screen 1</option>
                                    <option>screen 2</option>
                                    <option>screen 3</option>
                                </select>
                            </div><!-- /.form-group -->
                            <div class="form-group">
                                <label>Disabled</label>
                                <select class="form-control select2" disabled="disabled" style="width: 100%;">
                                    <option selected="selected">Alabama</option>
                                    <option>Alaska</option>
                                    <option>California</option>
                                    <option>Delaware</option>
                                    <option>Tennessee</option>
                                    <option>Texas</option>
                                    <option>Washington</option>
                                </select>
                            </div><!-- /.form-group -->

                            <div class="form-group">
                                <label for="msgData">Advertise Data</label>
                                <input type="text" class="form-control" id="msgData" placeholder="Enter the content of your advertise">
                            </div>
                            <div class="form-group">
                                <label for="imageInput">Image input</label>
                                <input id="imageInput" type="file" name="files[]" data-url="/upload" multiple>

                            </div>
                            <div class="box-footer">
                                <button id="submit" type="submit" class="btn btn-primary">Submit</button>
                            </div>
                        </div><!-- /.col -->

                    </div><!-- /.row -->
                </div><!-- /.box-body -->
            </form>

        </div><!-- /.box -->


        <button ng-click="test()">maor</button>
    </section><!-- /.content -->
</div><!-- /.content-wrapper -->
